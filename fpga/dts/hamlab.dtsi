/*
 * HAMLAB specific features, mostly GPIO on I2C
 *
 * pca9555 I2C GPIO extender interrupt is connected
 * to MIO[10] used as GPIO, 0x2 specifies trigger mode:
 * 2 = high-to-low edge triggered
*/

///include/ "miso2gpio.dtsi"
/include/ "spi2gpio.dtsi"

&i2c0 {
//	gpio_expander: pca9555@20 {	
//		compatible = "nxp,pca9555";
//		interrupt-parent = <&gpio0>;
//		interrupts = <11 0x2>;
//		gpio-controller;
//		#gpio-cells = <2>;
//		interrupt-controller;
//		#interrupt-cells = <2>;
//		reg = <0x20>;
//	};	
	gpio_expander: mcp23017@20 {	
		compatible = "microchip,mcp23017";
		interrupt-parent = <&gpio0>;
		interrupts = <11 0x2>;
		gpio-controller;
		#gpio-cells = <2>;
		interrupt-controller;
		#interrupt-cells = <2>;
		reg = <0x20>;
		microchip,irq-mirror;
	};	
};

// KEYS test code

/ {
	gpio-keys {
		compatible = "gpio-keys";
		autorepeat;
		key_A {
			label = "GPIO Key A";
			linux,code = <30>;
			gpios = <&gpio_expander 1 1>;
		};
		key_B {
			label = "GPIO Key B";
			linux,code = <48>;
			gpios = <&gpio_expander 2 1>;
		};
		key_C {
			label = "GPIO Key C";
			linux,code = <46>;
			gpios = <&gpio0 10 1>;
		};
//		key_power {
//			label = "GPIO Key POWER";
//			linux,code = <116>;
//			gpios = <&gpio0 12 1>;
//		};
	};

	gpio-poweroff {
		compatible = "gpio-poweroff";
		gpios = <&gpio_expander 0 0>;
	};
};
